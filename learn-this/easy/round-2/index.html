<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><title>Don't push the red button</title><link rel="stylesheet" href="/css/normalize.css"><link rel="stylesheet" href="/css/header-footer.css"><link rel="stylesheet" href="/css/syntax.css"><link rel="stylesheet" href="/css/learn-this/learn-this-page.css"><link rel="icon" type="image/png" href="/images/favicon.png"><link href='http://fonts.googleapis.com/css?family=Titillium+Web:400,700,300,200' rel='stylesheet' type='text/css'> <script>!function(e,a,n,t,o,c,s){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,c=a.createElement(n),s=a.getElementsByTagName(n)[0],c.async=1,c.src=t,s.parentNode.insertBefore(c,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-40112459-1","joybox.io"),ga("send","pageview")</script><script src="/scripts/jquery-2.0.3.min.js"></script></head><body> <header> <nav> <a title="JOYBOX" href="/"><img src="/images/logo-header.png"></a><ul><li><a title="GET STARTED" href="/get-started">GET STARTED</a></li><li><a title="DOCUMENTATION" href="/documentation">DOCUMENTATION</a></li><li><a title="LEARN THIS" href="/learn-this">LEARN THIS</a></li><li><a title="HIGH SCORES" href="/high-scores">HIGH SCORES</a></li><li><a title="VERSION HISTORY" href="/version-history">VERSION HISTORY</a></li><li><a title="HELP" href="https://groups.google.com/forum/#!forum/joybox-wrapper">HELP</a></li></ul> </nav> </header><section id="title"><h1>Learn This!</h1> </section> <section id="blog"> <section id="theme" style="background:url('/images/tutorial-easy.png') no-repeat center 20px ,#600"><h4>Round 2: Tutorial<span>Game Architecture</span></h4><p>This tutorial will help you to create a single button with a proper menu and using it to launch the a new game scene.</p> <a href="/learn-this/easy">Return to Easy Path</a> </section> <section id="content"><h4>DIRECTOR, SCENE, LAYER AND SPRITE</h4> <article><h2>Don't push the red button</h2><p><p>In the previous round we create a simple scene, containing the background of our game menu, which looks something like the following:</p><div class="highlight"><pre><code class="sh language-sh" data-lang="sh">rake
</code></pre></div><p><img src="../../../images/learn-this/easy/round-2/start.png" alt="Round 1"/></p><p>The first thing we need to do is download the required assets for this tutorial: <a href="../../../downloads/learn-this/easy/round-2/assets.zip">Round 2 Assets</a>, and place them in the resources folder.</p><h3 id=menu-image>Menu Image</h3><p>The <strong>Menu Image</strong> object will allow us to present a button on the screen, please open the <em>menu_layer.rb</em> file and add the following into the <strong>on_enter</strong> method:</p><div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="n">start_button</span> <span class="o">=</span> <span class="no">MenuImage</span><span class="o">.</span><span class="n">new</span> <span class="n">image_file_name</span><span class="p">:</span> <span class="s1">'sprites/menu/start.png'</span><span class="p">,</span>
                                    <span class="n">selected_image_file_name</span><span class="p">:</span> <span class="s1">'sprites/menu/start.png'</span><span class="p">,</span>
                                    <span class="n">disabled_image_file_name</span><span class="p">:</span> <span class="s1">'sprites/menu/start.png'</span>
</code></pre></div><p>Please note that you can specify different images for the three states of the <strong>Menu Image</strong> (Normal, Selected and Disabled.</p><div class='flag info'><h5>More intel!</h5><br/><p>We are not specifying any location for the Menu Image yet.</p></div><p><img class='more-info' src='/images/moreinfo.png'/> For more information about the Menu Image, see: <a href="../../../documentation/menu-image">Menu Image documentation page</a>.</p><h3 id=menu>Menu</h3><p>The object <strong>Menu</strong> is very useful when we want to have multiple buttons or labels in the screen, basically what it does is automatically adjusts the frame of every button or label added as a child in a way that they will look ordered on the screen.</p><p>We can implement a menu for our game in the following way:</p><div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="n">start_button</span> <span class="o">=</span> <span class="no">MenuImage</span><span class="o">.</span><span class="n">new</span> <span class="n">image_file_name</span><span class="p">:</span> <span class="s1">'sprites/menu/start.png'</span><span class="p">,</span>
                                    <span class="n">selected_image_file_name</span><span class="p">:</span> <span class="s1">'sprites/menu/start.png'</span><span class="p">,</span>
                                    <span class="n">disabled_image_file_name</span><span class="p">:</span> <span class="s1">'sprites/menu/start.png'</span>

<span class="c1"># We must define a position for the menu and from that point it will start ordering its child items</span>
<span class="n">menu</span> <span class="o">=</span> <span class="no">Menu</span><span class="o">.</span><span class="n">new</span> <span class="ss">position</span><span class="p">:</span> <span class="o">[</span><span class="no">Screen</span><span class="o">.</span><span class="n">half_width</span><span class="p">,</span> <span class="mi">100</span><span class="o">.</span><span class="mi">0</span><span class="o">]</span><span class="p">,</span> <span class="ss">items</span><span class="p">:</span> <span class="o">[</span><span class="n">start_button</span><span class="o">]</span>

<span class="c1"># We need to add the menu as a child of the layer</span>
<span class="nb">self</span> <span class="o">&lt;&lt;</span> <span class="n">menu</span>
</code></pre></div><p>Now if we run our game we should see the following:</p><div class="highlight"><pre><code class="sh language-sh" data-lang="sh">rake
</code></pre></div><p><img src="../../../images/learn-this/easy/round-2/menu.png" alt="Menu"/></p><p><img class='more-info' src='/images/moreinfo.png'/> For more information about the Menu, see: <a href="../../../documentation/menu">Menu documentation page</a>.</p><h3 id=game-scene>Game Scene</h3><p>Now is time to create the scene in which will be presenting our game, les create a new file inside the scene folder with the name <strong>game_scene.rb</strong> and let's add the following:</p><div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">GameScene</span> <span class="o">&lt;</span> <span class="no">Joybox</span><span class="o">::</span><span class="no">Core</span><span class="o">::</span><span class="no">Scene</span>

  <span class="k">def</span> <span class="nf">on_enter</span>
  <span class="k">end</span>

<span class="k">end</span>
</code></pre></div><p>Now that we have the new scene is time to present it using the <strong>Menu Button</strong> that we create earlier, this object allows us to pass a block that will be executed when the user touches it. Please open the <strong>menu_layer.rb</strong> file and modify the creation with the following:</p><div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="n">start_button</span> <span class="o">=</span> <span class="no">MenuImage</span><span class="o">.</span><span class="n">new</span> <span class="n">image_file_name</span><span class="p">:</span> <span class="s1">'sprites/menu/start.png'</span><span class="p">,</span>
                                    <span class="n">selected_image_file_name</span><span class="p">:</span> <span class="s1">'sprites/menu/start.png'</span><span class="p">,</span>
                                    <span class="n">disabled_image_file_name</span><span class="p">:</span> <span class="s1">'sprites/menu/start.png'</span> <span class="k">do</span> <span class="o">|</span><span class="n">menu_item</span><span class="o">|</span>

  <span class="c1"># We tell the director that push the game scene into the stack.    </span>
  <span class="no">Joybox</span><span class="o">.</span><span class="n">director</span> <span class="o">&lt;&lt;</span> <span class="no">GameScene</span><span class="o">.</span><span class="n">new</span>
<span class="k">end</span>
</code></pre></div><p><img class='more-info' src='/images/moreinfo.png'/> For more information about the Director, see: <a href="../../../documentation/director">Menu documentation page</a>.</p><p>If we run the game and touch the button we should see the following:</p><p><img src="../../../images/learn-this/easy/round-2/blank-scene.png" alt="Blank Scene"/></p><p>We are seeing a black screen because our <strong>Game Scene</strong> is empty but when we start adding items to it, we should see the changes!</p><div class='flag'><h5>Level Up!</h5><br/><p>The scenes work as an insolation blocks of our game, for example all the code that is implemented on the menu will not be accessible in the Game Scene. Think about how UIViewControllers work.</p></div><h3 id=round->Round 3</h3><p>This is all for the moment but in order that you have better understanding about how menus work, let's do a little challenge:</p><p>Add a new menu item which can be <strong>Menu Image</strong> or <strong>Menu Label</strong>, and when the user touch it present a new scene with some credits for your game. Please note that this new scene must contain a button to return to the main menu.</p><p><img class='more-info' src='/images/moreinfo.png'/> You can download the source code of this round from: <a href="../../../downloads/learn-this/easy/round-2/asteroids.zip">Easy Level - Round 2</a></p></p> </article><div class="previous"><a href="/learn-this/easy/round-1">PREVIOUS</a></div> </section> </section><section id="buildings"> <img src="/images/buildings-footer.png"> </section> <footer> <section id="container"> <img src="/images/star-footer.png"><p>Joybox is distributed under the terms of the MIT License<br>Design by: <a href="http://sandradelare.com/">Sandra de la Re</a></p> </section> </footer></body></html>